<div class="row"*ngIf="userRole === 'patient'">
  <div class="col-xl-12">
    <div class="panel panel-inverse card" data-sortable-id="form-stuff-1">
      <div class="panel-heading bg-light">
        <h4 class=" fw-bold fs-3 text-dark d-flex justify-content-center mx-auto">Add Appoinment</h4>
        <div class="panel-heading-btn">
        </div>
      </div>
      <div class="panel-body card-body">
        <form [formGroup]="appointmentForm" (ngSubmit)="submit()">

          <div class="form-group row m-b-15">
            <label class="col-form-label col-md-3 fw-bold">Department Name <span class="text-danger fw-bold">*</span></label>
            <div class="col-md-9">
              <select class="form-control" formControlName="departmentName" placeholder="Choose one option" >
                <option value="">--Please choose an option--</option>
                <option *ngFor="let department of departmentNameList" [value]="department.departmentName">
                  {{ department.departmentName }}
                </option>
              </select>
              <div *ngIf="appointmentForm.get('departmentName')?.invalid && appointmentForm.get('departmentName')?.touched" class="text-danger">
                Selection of departmentName is required.
              </div>
            </div>
          </div>
        
          <div class="form-group row m-b-15">
            <label class="col-form-label col-md-3 fw-bold">Doctor name<span class="text-danger fw-bold">*</span></label>
            <div class="col-md-9">
              <select class="form-control m-b-5" formControlName="doctorname" required>
                <option value="">--Please choose an option--</option>
                <option *ngFor="let doctor of doctorName" [value]="doctor.email">
                  {{ doctor.firstName }} {{ doctor.lastName }}
                </option>
              </select>
              <div *ngIf="appointmentForm.get('doctorname')?.invalid && appointmentForm.get('doctorname')?.touched" class="text-danger">
                Valid Doctor name is required.
              </div>
            </div>
          </div>
        
          <div class="form-group row m-b-15">
            <label class="col-form-label col-md-3 fw-bold">Date <span class="text-danger fw-bold">*</span></label>
            <div class="col-md-9">
              <input type="date" class="form-control m-b-5" placeholder="Appointment Date" formControlName="date" required min="{{ tomorrow | date: 'yyyy-MM-dd' }}" />
              <div *ngIf="appointmentForm.get('date')?.invalid && appointmentForm.get('date')?.touched" class="text-danger">
                Date is required.
              </div>
            </div>
          </div>
        
          <div class="form-group row m-b-15">
            <label class="col-form-label col-md-3 fw-bold">Time <span class="text-danger fw-bold">*</span></label>
            <div class="col-md-9">
              <input type="time" class="form-control m-b-5" placeholder="Time" formControlName="time" required>
              <div *ngIf="appointmentForm.get('time')?.invalid && appointmentForm.get('time')?.touched" class="text-danger">
                Time is required
              </div>
            </div>
          </div>
        
          <div class="form-group row m-b-15">
            <label class="col-form-label col-md-3 fw-bold">Mobile Number<span class="text-danger fw-bold">*</span></label>
            <div class="col-md-9">
              <input type="text" class="form-control m-b-5" placeholder="Mobile Number" formControlName="phone" required>
              <div *ngIf="appointmentForm.get('phone')?.invalid && appointmentForm.get('phone')?.touched" class="text-danger">
                Valid mobile number is required.
              </div>
            </div>
          </div>
        
          <div class="form-group row m-b-15">
            <label class="col-form-label col-md-3 fw-bold">Problem<span class="text-danger fw-bold">*</span></label>
            <div class="col-md-9">
              <textarea type="text" class="form-control m-b-5" placeholder="Problem" formControlName="problem" required></textarea>
              <div *ngIf="appointmentForm.get('problem')?.invalid && appointmentForm.get('problem')?.touched" class="text-danger">
                Problem is required
              </div>
            </div>
          </div>
        
          <div class="form-group row m-b-15 justify-content-center">
            <button type="submit" class="btn btn-success mr-2 col-auto btn">Submit</button>
            <button type="reset" class="btn btn-primary col-auto">Reset</button>
          </div>
        </form>
        
      </div>
    </div>
    <div class="container-fulid">
      <div class="row">
        <div class="card">
          <div class="card-body">
            <div class="col-lg-12">
              <div class="panel panel-inverse" data-sortable-id="table-basic-4">
                <div class="panel-body">
                  <div class="table-responsive">
                    <table class="table">
                      <thead>
                        <tr>
                          <th>SN</th>
                          <th nowrap>Email</th>
                          <th nowrap>Department Name</th>
                          <th nowrap>Doctor Email</th>
                          <th nowrap>Date</th>
                          <th nowrap>Time</th>
                          <th nowrap>Paid</th>
                          <th nowrap>Action</th>

                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of appointmentTable; let i = index">
                          <td>{{i+1}}</td>
                          <td>{{item.email}}</td>
                          <td>{{item.departmentName}}</td>
                          <td>{{item.doctorname}}</td>
                          <td>{{item.date}}</td>
                          <td>{{item.time}}</td>
                          <td>{{item.isPaid ? 'Yes' : 'No'}}</td>
                          <td>
                            <div class="d-flex flex-wrap button-group">
                              <button
                              class="btn btn-warning btn-sm mb-2 mb-md-0 mr-md-2"
                              *ngIf="!item.isPaid"
                              (click)="makePayment(item)"
                            >
                              <i class="fas fa-dollar"></i>Pay
                            </button>                              <button class="btn btn-warning btn-sm mb-2 mb-md-0 mr-md-2" (click)="edit()"> <i class="fas fa-edit"></i></button>
                              <button class="btn btn-outline-danger btn-sm" (click)="deleteAppointment(item._id)"> <i class="fas fa-trash-alt"></i></button>
                            </div>
                          </td>
                          
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <!-- end table-responsive -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div class="container" *ngIf="userRole === 'doctor'">
  <div class="container">
    <div class="row">
      <div class="col">
        <h2>Appointments</h2>
        <div class="table-responsive">
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>SN</th>
                <th>Username</th>
                <th>Email</th>
                <th>Department Name</th>
                <th>Doctor Name</th>
                <th>Date</th>
                <th>Time</th>
                <th>Phone</th>
                <th>Problem</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let appointment of getAppointmentByEmailList; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ appointment.username }}</td>
                <td>{{ appointment.email }}</td>
                <td>{{ appointment.departmentName }}</td>
                <td>{{ appointment.doctorname }}</td>
                <td>{{ appointment.date }}</td>
                <td>{{ appointment.time }}</td>
                <td>{{ appointment.phone }}</td>
                <td>{{ appointment.problem }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>