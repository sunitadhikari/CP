<form [formGroup]="reportForm" (ngSubmit)="onSubmit()" class="needs-validation">
  <div class="form-group">
    <label for="patientName">Patient Name:</label>
    <select id="patientName" class="form-control" formControlName="patient" required>
      <option *ngFor="let item of admitPatient" [value]="item._id">
        {{ item.firstName }} {{ item.lastName }}
      </option>
    </select>
    <div class="invalid-feedback">
      Patient name is required.
    </div>
  </div>

  <div class="form-group">
    <label for="date">Date:</label>
    <input type="text" id="date" class="form-control" formControlName="date" [value]="today" readonly required>
    <div class="invalid-feedback">
      Date is required.
    </div>
  </div>

  <div class="form-group">
    <label for="symptoms">Symptoms:</label>
    <textarea id="symptoms" class="form-control" formControlName="symptoms" rows="4" required></textarea>
    <div class="invalid-feedback">
      Symptoms are required.
    </div>
  </div>

  <div class="form-group">
    <label for="diagnosis">Diagnosis:</label>
    <textarea id="diagnosis" class="form-control" formControlName="diagnosis" rows="4" required></textarea>
    <div class="invalid-feedback">
      Diagnosis is required.
    </div>
  </div>

  <div class="form-group">
    <label for="treatment">Treatment:</label>
    <textarea id="treatment" class="form-control" formControlName="treatment" rows="4" required></textarea>
    <div class="invalid-feedback">
      Treatment is required.
    </div>
  </div>

  <button type="submit" class="btn btn-primary" [disabled]="!reportForm.valid">Submit</button>
</form>

<div class="responsive-table">
  <table class="table table-striped mt-4">
  <thead>
    <tr>
      
      <th scope="col">SN</th>
      <th scope="col">Patient Name</th>
      <th scope="col">Date</th>
      <th scope="col">Symptoms</th>
      <th scope="col">Diagnosis</th>
      <th scope="col">Treatment</th>
      <th scope="col">Actions</th>

    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let report of reports; let i=index">
      <td>{{i+1}}</td>
      <td>{{report.username}}</td>
      <td>{{ report.date | date: 'shortDate' }}</td>
      <td>{{ report.symptoms }}</td>
      <td>{{ report.diagnosis }}</td>
      <td>{{ report.treatment }}</td>
      <td>
        <button class="btn btn-primary btn-sm" (click)="viewReport(report)" data-toggle="modal" data-target="#viewReportModal">View</button>
      </td>
    </tr>
  </tbody>
</table>
</div>
<!-- View Report Modal -->
<div class="modal fade" id="viewReportModal" tabindex="-1" role="dialog" aria-labelledby="viewReportModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewReportModalLabel">Report Details for {{ selectedReport?.username }}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p><strong>Date:</strong> {{ selectedReport?.date | date: 'shortDate' }}</p>
        <p><strong>Symptoms:</strong> {{ selectedReport?.symptoms }}</p>
        <p><strong>Diagnosis:</strong> {{ selectedReport?.diagnosis }}</p>
        <p><strong>Treatment:</strong> {{ selectedReport?.treatment }}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
